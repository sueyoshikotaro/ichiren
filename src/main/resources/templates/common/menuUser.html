<!-- ユーザ用メニュー(名称:ホーム) -->
<!-- 必須情報(下記2項目) -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<!-- 必須項目 -->
	<meta charset="UTF-8">

	<!-- サイトタイトル -->
	<title>タスクどん|メニュー</title>

	<!-- デザイン等 -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

	<!-- CSS接続 -->
	<link rel="stylesheet" th:href="@{/css/header.css}"> <!-- 共通CSS -->
	<link rel="stylesheet" th:href="@{/css/body.css}"> <!-- 共通CSS -->

	<!-- 共通header呼出し(ユーザ用) -->
	<div>
		<th:block th:insert="fragment/header :: headerUser">
	</div>

</head>

<body>
	<!-- コンテナ -->
	<div class="container">

		<h2 class="menu-text">ホーム</h2>

		<div th:if="${session.user_roll} == 'リーダ'"> <!--役職判断処理-->
			<select class="form-select place-update" aria-label="Default select example">
				<option selected>休憩中</option>
				<div th:each="room : ${roomList}">
					<option th:text="${room.room_name}+':'+${room.hall}+${room.floor}"></option>
				</div>
				<option>校外作業中</option>
			</select>
		</div>

		<div>
			<th:block th:insert="fragment/notice :: notice">
		</div>

		<!-- 遷移先 -->
		<div th:if="${session.user_roll} == 'リーダ'"> <!-- 役職判断処理 -->
			<a class="menu-btn" th:onclick="|location.href='@{memberList}'|">メンバ一覧</a><!--未実装-->
		</div>

		<a class="menu-btn" th:onclick="|location.href='@{taskList}'|">タスク一覧</a>

		<a class="menu-btn" th:onclick="|location.href='@{todoList}'|">ToDoリスト</a>

		<div th:if="${session.user_roll} == 'リーダ'"> <!-- 役職判断処理 -->
			<a class="menu-btn" th:onclick="|location.href='@{noticeRegist}'|">連絡事項作成</a><!--未実装-->
		</div>

		<a class="menu-btn" th:onclick="|location.href='@{chat}'|">チャット</a><!--未実装-->

		<a class="menu-btn" th:onclick="|location.href='@{deptGroupList}'|">所属グループ一覧</a>
	</div>

	<!--休憩中の間、リンクを無効化-->
	<script>
		function toggleLinkStatus() {
			const selectElement = document.querySelector('.place-update'); // select要素を取得
			const selectedOption = selectElement.options[selectElement.selectedIndex].text; // 選択されたoptionのテキストを取得
			const links = document.querySelectorAll('.menu-btn'); // すべてのmenu-btnクラスを持つリンクを取得

			links.forEach(link => {
				if (selectedOption === '休憩中') {
					link.classList.add('disabled'); //disabledクラスを追加
					link.style.pointerEvents = 'none'; //クリックイベントを無効化
				} else {
					link.classList.remove('disabled'); //disabledクラスを削除
					link.style.pointerEvents = 'auto'; //クリックイベントを有効化
				}
			});
		}

		document.addEventListener('DOMContentLoaded', toggleLinkStatus); //初期状態を設定
		document.querySelector('.place-update').addEventListener('change', toggleLinkStatus); //select要素の変更時に実行
	</script>

	<!-- bootstrapのjsリンク接続 -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
		crossorigin="anonymous"></script>

</body>

</html>