<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">

<head>
	<title>タスクどん|タスク登録</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
	<link rel="stylesheet" th:href="@{/css/taskRegist.css}">
	<link rel="icon" type="image/png" th:href="@{/img/icon.png}">
</head>

<body>
	<button class="logoutButton" th:href="@{/taskdon/admin/logout}">ログアウト</button>
	<div class="container">
		<h2>【タスク登録】</h2>
		<div>
			<form th:action="@{taskRegistConfirm}" method="post">
				<div class="form-group">
					<label for="exampleFormControlInput1" class="form-label">タスク名</label>
					<input type="text" class="form-control" name="task_name" id="exampleFormControlInput1">
				</div>
				<div class="form-group">
					<label for="exampleFormControlInput1" class="form-label">カテゴリ名</label>
					<input type="text" class="form-control" name="task_category" id="exampleFormControlInput1">
				</div>
				<div class="form-group">
					<label for="exampleFormControlTextarea1" class="form-label">タスク概要</label>
					<textarea class="form-control" name="task_content" id="exampleFormControlTextarea1"
						rows="3"></textarea>
				</div>
				<div class="form-group">
					<label>担当者</label>
					<select class="form-select" aria-label="Default select example" required>
						<option selected disabled>担当者を選択してください</option>
						<option name="user_name" th:each="user : ${taskuser}" th:value="${user.user_name}"
							th:text="${user.user_name}">
						</option>
					</select>
				</div>
				<div class="form-group">
					<div class="row">
						<div class="col">
							<label id="priority" class="form-label">優先度</label>
							<select class="form-select" name="task-priority" aria-label="Default select example"
								required>
								<option value="1">1</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5</option>
							</select>
						</div>
						<div class="col">
							<label id="level" class="form-label">難易度</label>
							<select class="form-select" name="task-level" aria-label="Default select example" required>
								<option value="1">1</option>
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="4">4</option>
								<option value="5">5</option>
							</select>
						</div>
						<div class="col">
							<label class="form-label">重み</label>
							<input class="form-control" type="text" id="result" name="task_weight"
								aria-label="readonly input example" readonly>

							<!--JavaScript挿入欄(重み計算)-->
							<script th:inline="javascript">
								const priority = document.getElementById("priority").nextElementSibling;
								const level = document.getElementById("level").nextElementSibling;

								priority.addEventListener('change', calculate);
								level.addEventListener('change', calculate);
								calculate();

								function calculate() {
									const value1 = priority.value;
									const value2 = level.value;
									const resultValue = parseInt(value1) * parseInt(value2);
									document.getElementById("result").value = resultValue;
								}
							</script>

							</input>
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<label class="form-label">開始予定日</label>
						<input type="date" class="form-control" name="start_date" required>
					</div>
					<div class="col">
						<label class="form-label">終了予定日</label>
						<input type="date" class="form-control" name="end_date" required>
					</div>
				</div>

				<input type="submit" value="確認">
				<input type="submit" value="メニュー">
				<input type="submit" value="戻る">
			</form>
		</div>
	</div>

</body>

</html>