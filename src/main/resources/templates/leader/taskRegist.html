<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">

<head>
	<title>タスクどん|タスク登録</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
	<link rel="stylesheet" th:href="@{/css/taskRegist.css}">
	<link rel="icon" type="image/png" th:href="@{/img/icon.png}">
</head>

<body>
	<a class="logoutText" th:href="@{/taskdon/admin/logout}">ログアウト</a>
	<div class="container">
		<h2>【タスク登録】</h2>
		<div>
			<form th:action="@{taskRegistConfirm}" method="post">
				<div>
					<label>タスク名</label>
					<input type="text" name="task_name" required>
				</div>
				<div>
					<label>カテゴリ名</label>
					<input type="text" name="task_category" required>
				</div>
				<div class="form-group">
					<label>タスク概要</label>
					<textarea name="task_content" required></textarea>
				</div>
				<div>
					<label>担当者</label>
					<select name="user_name" required>
						<p>担当者を選択してください</p>
						<option name="user_name" th:each="user : ${taskuser}" th:value="${user.user_name}"
							th:text="${user.user_name}">
						</option>
					</select>
				</div>
				<div class="form-group">
					<label id="priority">優先度</label>
					<select name="task_priority" required>
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
					</select>
				</div>
				<div>
					<label id="level">難易度</label>
					<select name="task_level" required>
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
					</select>
				</div>
				<div>
					<label>重み</label>
					<input type="text" id="result" name="task_weight" readonly>
					<!--JavaScriptリンク挿入欄-->
					<script th:inline="javascript">
						const priority = document.getElementById("priority").nextElementSibling;
						const level = document.getElementById("level").nextElementSibling;

						priority.addEventListener('change', calculate);
						level.addEventListener('change', calculate);
						calculate();

						function calculate() {
							const value1 = priority.value;
							const value2 = level.value;
							const resultValue = parseInt(value1) * parseInt(value2);
							document.getElementById("result").value = resultValue;
						}
					</script>
					</input>
				</div>

				<div>
					<label>開始予定日</label>
					<input type="date" name="start_date" required>
				</div>
				<div>
					<label>終了予定日</label>
					<input type="date" name="end_date" required>
				</div>
				<input type="submit" value="確認">
				<input type="submit" value="メニュー">
				<input type="submit" value="戻る">
			</form>
		</div>
	</div>

</body>

</html>